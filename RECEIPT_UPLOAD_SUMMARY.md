# üì∏ –ü—ñ–¥—Å—É–º–æ–∫: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–µ–∫—ñ–≤

## ‚úÖ –©–æ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ

### üé® –ù–æ–≤–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: ReceiptUpload

**–û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª:** `car-line-front/src/shared/ui/receipt-upload.tsx` (523 —Ä—è–¥–∫–∏)

#### –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:

1. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ**

   - üì∏ –ß–µ—Ä–µ–∑ –∫–∞–º–µ—Ä—É (mobile)
   - üñºÔ∏è –ó –≥–∞–ª–µ—Ä–µ—ó
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –º–Ω–æ–∂–∏–Ω–Ω–æ–≥–æ –≤–∏–±–æ—Ä—É
   - –û–±–º–µ–∂–µ–Ω–Ω—è –¥–æ 5 —Ñ–æ—Ç–æ (–Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è)

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞**

   - ‚è≥ –°—Ç–∞—Ç—É—Å "processing" (1-3 —Å–µ–∫)
   - ‚úÖ –°—Ç–∞—Ç—É—Å "success" (~70%)
   - ‚ùå –°—Ç–∞—Ç—É—Å "error" (~30%)
   - 6 —Ç–∏–ø—ñ–≤ –ø–æ–º–∏–ª–æ–∫ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

3. **UI/UX**

   - üîç –ü–µ—Ä–µ–≥–ª—è–¥ —É –ø–æ–≤–Ω–æ–º—É —Ä–æ–∑–º—ñ—Ä—ñ
   - üóëÔ∏è –í–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–æ—Ç–æ
   - üìä –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ñ–∞–π–ª–∏
   - üé® –ö–æ–ª—ñ—Ä–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Å—Ç–∞—Ç—É—Å—É

4. **–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫**
   - –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è —Ñ–æ—Ä–º–∏ –ø—ñ–¥ —á–∞—Å –æ–±—Ä–æ–±–∫–∏
   - –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è —Ñ–æ—Ä–º–∏ –∑ –ø–æ–º–∏–ª–∫–æ–≤–∏–º–∏ —Ñ–æ—Ç–æ
   - Toast –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
car-line-front/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ shared/ui/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ receipt-upload.tsx          ‚≠ê –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ receipt-upload.example.tsx  üìö –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts                    üîÑ –û–Ω–æ–≤–ª–µ–Ω–æ (–µ–∫—Å–ø–æ—Ä—Ç)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md                   ‚ú® –ù–æ–≤–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ expenses/ui/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ expense-form.tsx        üîÑ –û–Ω–æ–≤–ª–µ–Ω–æ (—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ maintenance/ui/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ maintenance-form.tsx    üîÑ –û–Ω–æ–≤–ª–µ–Ω–æ (—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è)
‚îÇ   ‚îú‚îÄ‚îÄ pages/demo/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ receipt-upload-demo.tsx     ‚≠ê –î–µ–º–æ-—Å—Ç–æ—Ä—ñ–Ω–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ app/router/
‚îÇ       ‚îî‚îÄ‚îÄ index.tsx                   üîÑ –û–Ω–æ–≤–ª–µ–Ω–æ (–º–∞—Ä—à—Ä—É—Ç)
‚îú‚îÄ‚îÄ RECEIPT_UPLOAD.md                   üìö –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ RECEIPT_UPLOAD_QUICK_START.md       üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ RECEIPT_UPLOAD_CHANGELOG.md         üìù –Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω
‚îî‚îÄ‚îÄ RECEIPT_UPLOAD_TESTING.md           üß™ –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

RECEIPT_UPLOAD_SUMMARY.md              üìã –¶–µ–π —Ñ–∞–π–ª
```

### üîó –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

#### 1. –§–æ—Ä–º–∞ –≤–∏—Ç—Ä–∞—Ç

**–§–∞–π–ª:** `features/expenses/ui/expense-form.tsx`

**–ó–º—ñ–Ω–∏:**

- –î–æ–¥–∞–Ω–æ —ñ–º–ø–æ—Ä—Ç `ReceiptUpload`, `ReceiptPhoto`, `useIonToast`
- –î–æ–¥–∞–Ω–æ state –¥–ª—è —Ñ–æ—Ç–æ
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é
- Toast –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

#### 2. –§–æ—Ä–º–∞ –¢–û

**–§–∞–π–ª:** `features/maintenance/ui/maintenance-form.tsx`

**–ó–º—ñ–Ω–∏:**

- –ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –¥–æ —Ñ–æ—Ä–º–∏ –≤–∏—Ç—Ä–∞—Ç

#### 3. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è

**–§–∞–π–ª:** `app/router/index.tsx`

**–ó–º—ñ–Ω–∏:**

- –î–æ–¥–∞–Ω–æ –º–∞—Ä—à—Ä—É—Ç `/demo/receipt-upload`

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

#### 1. RECEIPT_UPLOAD.md (232 —Ä—è–¥–∫–∏)

–ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:

- –û–ø–∏—Å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ
- –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- –û–ø–∏—Å Props —Ç–∞ —Ç–∏–ø—ñ–≤
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ —ñ—Å–Ω—É—é—á—ñ —Ñ–æ—Ä–º–∏
- –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ
- –ú–∞–π–±—É—Ç–Ω—è —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –±–µ–∫–µ–Ω–¥–æ–º
- Troubleshooting

#### 2. RECEIPT_UPLOAD_QUICK_START.md (156 —Ä—è–¥–∫—ñ–≤)

–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç:

- –©–æ —Ü–µ —Ç–∞ –Ω–∞–≤—ñ—â–æ
- –®–≤–∏–¥–∫–∏–π —Ç–µ—Å—Ç
- –î–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
- –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

#### 3. RECEIPT_UPLOAD_CHANGELOG.md (107 —Ä—è–¥–∫—ñ–≤)

–Ü—Å—Ç–æ—Ä—ñ—è –≤–µ—Ä—Å—ñ–π:

- v1.0.0 - –ë–∞–∑–æ–≤–∞ –≤–µ—Ä—Å—ñ—è
- v1.1.0 - –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ –ø–æ–º–∏–ª–∫–∏
- –ú–∞–π–±—É—Ç–Ω—ñ –ø–ª–∞–Ω–∏ (v2.0.0, v2.1.0, v3.0.0)

#### 4. RECEIPT_UPLOAD_TESTING.md (350+ —Ä—è–¥–∫—ñ–≤)

–ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

- 10 —Ä–æ–∑–¥—ñ–ª—ñ–≤ —Ç–µ—Å—Ç—ñ–≤
- 3 —Å—Ü–µ–Ω–∞—Ä—ñ—ó
- –§–æ—Ä–º–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

#### 5. receipt-upload.example.tsx (286 —Ä—è–¥–∫—ñ–≤)

7 –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

- –ë–∞–∑–æ–≤–µ
- –ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é
- –ó –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º
- –ó –æ–±–º–µ–∂–µ–Ω–Ω—è–º
- –ó—ñ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é
- –ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
- –†–µ–∞–∫—Ü—ñ—è –Ω–∞ –∑–º—ñ–Ω–∏

## üéØ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –î–µ–º–æ-—Å—Ç–æ—Ä—ñ–Ω–∫–∞

```
URL: /demo/receipt-upload
```

### –£ —Ñ–æ—Ä–º–∞—Ö

```tsx
// –í–∏—Ç—Ä–∞—Ç–∏: /cars/:id/expenses/add
// –¢–û: /cars/:id/maintenance/add

import { ReceiptUpload, ReceiptPhoto } from "../../shared/ui";

const [photos, setPhotos] = useState<ReceiptPhoto[]>([]);

<ReceiptUpload maxPhotos={5} onPhotosChange={setPhotos} disabled={isLoading} />;
```

## üé® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è (—Å–∏–º—É–ª—è—Ü—ñ—è)

```typescript
// 30% —à–∞–Ω—Å –ø–æ–º–∏–ª–∫–∏
const shouldFail = Math.random() < 0.3;

// 6 —Ç–∏–ø—ñ–≤ –ø–æ–º–∏–ª–æ–∫
const errors = [
  "–§–æ—Ç–æ –∑–∞–Ω–∞–¥—Ç–æ —Ä–æ–∑–º–∏—Ç–µ...",
  "–ù–µ –≤–¥–∞–ª–æ—Å—è —Ä–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ —á–µ–∫...",
  // ...
];
```

### –û–±—Ä–æ–±–∫–∞

```typescript
// 1-3 —Å–µ–∫—É–Ω–¥–∏
const processingTime = 1000 + Math.random() * 2000;
await new Promise((resolve) => setTimeout(resolve, processingTime));
```

### –ó–∞—Ö–∏—Å—Ç —Ñ–æ—Ä–º

```typescript
// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—ñ–≤
const hasProcessing = photos.some((p) => p.status === "processing");
const hasErrors = photos.some((p) => p.status === "error");

if (hasProcessing || hasErrors) {
  // –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É
  return;
}
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –§–∞–π–ª–∏

- ‚≠ê **–ù–æ–≤–∏—Ö:** 8 —Ñ–∞–π–ª—ñ–≤
- üîÑ **–û–Ω–æ–≤–ª–µ–Ω–∏—Ö:** 4 —Ñ–∞–π–ª–∏
- üìù **–†—è–¥–∫—ñ–≤ –∫–æ–¥—É:** ~2500+
- üìö **–†—è–¥–∫—ñ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó:** ~1200+

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

- 1 –Ω–æ–≤–∏–π UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- 1 –¥–µ–º–æ-—Å—Ç–æ—Ä—ñ–Ω–∫–∞
- 2 –æ–Ω–æ–≤–ª–µ–Ω—ñ —Ñ–æ—Ä–º–∏
- 7 –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

## üöÄ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

### –ö–æ—Ä–æ—Ç–∫–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ

- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö
- [ ] –ó–±—ñ—Ä feedback –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- [ ] –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –°–µ—Ä–µ–¥–Ω—å–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ

- [ ] Unit-—Ç–µ—Å—Ç–∏
- [ ] E2E —Ç–µ—Å—Ç–∏
- [ ] Accessibility –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è
- [ ] i18n (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)

### –î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ

- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –±–µ–∫–µ–Ω–¥–æ–º API
- [ ] –†–µ–∞–ª—å–Ω–∞ OCR –æ–±—Ä–æ–±–∫–∞
- [ ] –ê–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Ñ–æ—Ä–º
- [ ] Cloud storage –¥–ª—è —Ñ–æ—Ç–æ
- [ ] AI-–∞–Ω–∞–ª—ñ–∑ —á–µ–∫—ñ–≤

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–∏—Ç–∏ —à–∞–Ω—Å –ø–æ–º–∏–ª–∫–∏

```typescript
// receipt-upload.tsx, —Ä—è–¥–æ–∫ 53
const shouldFail = Math.random() < 0.3; // –ó–º—ñ–Ω—ñ—Ç—å 0.3 –Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω–µ
```

### –ó–º—ñ–Ω–∏—Ç–∏ —á–∞—Å –æ–±—Ä–æ–±–∫–∏

```typescript
// receipt-upload.tsx, —Ä—è–¥–æ–∫ 74
const processingTime = 1000 + Math.random() * 2000; // 1-3 —Å–µ–∫
```

### –ó–º—ñ–Ω–∏—Ç–∏ –º–∞–∫—Å–∏–º—É–º —Ñ–æ—Ç–æ

```tsx
<ReceiptUpload maxPhotos={10} /> // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 5
```

## üêõ –í—ñ–¥–æ–º—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è

1. **–°–∏–º—É–ª—è—Ü—ñ—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó** - –Ω–µ —Ä–µ–∞–ª—å–Ω–∞ OCR –æ–±—Ä–æ–±–∫–∞
2. **Base64 –∫–æ–¥—É–≤–∞–Ω–Ω—è** - –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–≤—ñ–ª—å–Ω–∏–º –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —Ñ–∞–π–ª—ñ–≤
3. **–õ–æ–∫–∞–ª—å–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è** - —Ñ–æ—Ç–æ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
4. **–ú–æ–±—ñ–ª—å–Ω–∞ –∫–∞–º–µ—Ä–∞** - –ø–æ—Ç—Ä–µ–±—É—î HTTPS –Ω–∞ iOS

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:**

- –ü–æ–≤–Ω–∞: `RECEIPT_UPLOAD.md`
- –®–≤–∏–¥–∫–∞: `RECEIPT_UPLOAD_QUICK_START.md`
- –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è: `RECEIPT_UPLOAD_TESTING.md`

**–ü—Ä–∏–∫–ª–∞–¥–∏:**

- `src/shared/ui/receipt-upload.example.tsx`
- `/demo/receipt-upload` (live demo)

**–ü–∏—Ç–∞–Ω–Ω—è:**

- –°—Ç–≤–æ—Ä—ñ—Ç—å issue —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
- –ó–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ –∫–æ–º–∞–Ω–¥–∏ —Ä–æ–∑—Ä–æ–±–∫–∏

---

## üéâ –í–∏—Å–Ω–æ–≤–æ–∫

–°—Ç–≤–æ—Ä–µ–Ω–æ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —á–µ–∫—ñ–≤ –∑:

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é
- ‚úÖ –ó–∞—Ö–∏—Å—Ç–æ–º –≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –Ü–Ω—Ç—É—ó—Ç–∏–≤–Ω–∏–º UI/UX
- ‚úÖ –ü–æ–≤–Ω–æ—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—î—é
- ‚úÖ –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—é –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

**–í–µ—Ä—Å—ñ—è:** 1.1.0

**–î–∞—Ç–∞:** 19.12.2025
